<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
    <title>供应室PDA接口程序--历史发布</title>
    <link rel="stylesheet" href="./css/weui.css" />
    <link rel="stylesheet" href="./css/example.css" />
</head>

<body ontouchstart>
    <script type="text/javascript">
        if (window.__wxWebEnv && window.__wxWebEnv.getEnv()) {
            document.body.style.webkitTextSizeAdjust = JSON.parse(window.__wxWebEnv.getEnv()).fontScale + '%';
        }

        var userAgent = navigator.userAgent;
        //判断是否Chrome浏览器
        if (userAgent.indexOf("Chrome") == -1) {
            document.write("<h3>该浏览器不支持，请使用最新IE Edge或谷歌浏览器</h3>");
        }
    </script>

    <span aria-hidden="true" id="js_a11y_comma" class="weui-hidden_abs">，</span>

    <div class="container" id="container"></div>

    <script type="text/html" id="tpl_home">
        <div class="page">
            <div class="page__hd">
                <h1 class="page__title">
                    <img src="./images/notify.png" alt="发布日志" height="21px" />
                </h1>
                <p class="page__desc">供应室PDA接口程序--历史发布
                    <a style='margin-left:15px' class='pcdown'>PC下载</a>
                    <a style='margin-left:10px' class='pdadown'>PDA下载</a>
                    <a style='margin-left:10px' href="download/screen.zip">大屏下载</a>
                </p>
            </div>
            <div class="page__bd page__bd_spacing">
                <!-- <ul role="menubar" aria-label="历史发布">
                    <li role="none">
                        <div class="weui-flex js_category" aria-haspopup="true" aria-expanded="false">
                            <p class="weui-flex__item">2021-12-27【大屏幕接口发布】</p>
                            <img src="./images/icon_nav_form.png" alt=" 展开" role="button">
                        </div>
                        <div class="page__category js_categoryInner" role="menu" aria-hidden="true">
                            <div class="weui-cells page__category-content">
                                1.新增接口调用webconfig配置记录字段，所有的接口调用将记录当下的节点信息，以便后期查找原因。【12-20】<br /> 2.新增关于大屏幕清洗流程数据的状态图显示接口。【12-20】
                                <br /> 3.新增关于大屏幕机器的状态信息和器械包状态信息的接口。 【12-21】
                                <br />
                            </div>
                        </div>
                    </li>
                </ul>-->
            </div>
        </div>
        <script type="text/javascript">
            $(function() {
                var winH = $(window).height();
                var categorySpace = 10;

                function expandMenu() {
                    var $this = $(this),
                        $inner = $this.next('.js_categoryInner'),
                        $page = $this.parents('.page'),
                        $parent = $(this).parent('li');
                    var innerH = $inner.data('height');

                    if (!innerH) {
                        $inner.css('height', 'auto');
                        innerH = $inner.height();
                        $inner.removeAttr('style');
                        $inner.data('height', innerH);
                    }

                    if ($parent.hasClass('js_show')) {
                        $parent.removeClass('js_show');
                        $this.attr('aria-expanded', 'false');
                        $this.children('img').attr('alt', ' 展开');
                        $inner.attr('aria-hidden', 'true');
                        $('.js_item', $(this).siblings()).attr('tabindex', '-1');
                    } else {
                        $parent.siblings().removeClass('js_show');
                        $parent.siblings().children('.js_category').attr('aria-expanded', 'false');
                        $parent.siblings().children('.js_category img').attr('alt', ' 展开');
                        $parent.siblings().children('.js_categoryInner').attr('aria-hidden', 'true');
                        $('.js_item', $parent.siblings().children('.js_categoryInner')).attr('tabindex', '-1');

                        $parent.addClass('js_show');
                        $this.attr('aria-expanded', 'true');
                        $this.children('img').attr('alt', ' 收起');
                        $inner.attr('aria-hidden', 'false');
                        $('.js_item', $(this).siblings()).attr('tabindex', '0');

                        if (this.offsetTop + this.offsetHeight + innerH > $page.scrollTop() + winH) {
                            var scrollTop = this.offsetTop + this.offsetHeight + innerH - winH + categorySpace;

                            if (scrollTop > this.offsetTop) {
                                scrollTop = this.offsetTop - categorySpace;
                            }

                            $page.scrollTop(scrollTop);
                        }
                    }

                    var winH = $(window).height();
                    var $foot = $('body').find('.page__ft');
                    if ($foot.length < 1) return;

                    if ($foot.position().top + $foot.height() < winH) {
                        $foot.addClass('j_bottom');
                    } else {
                        $foot.removeClass('j_bottom');
                    }
                }

                $('.js_category').attr('tabindex', '0');
                $('.js_item').attr('tabindex', '0');
                $('.js_item', $('.js_category').siblings()).attr('tabindex', '-1');

                $('.js_item').on('click', function() {
                    var id = $(this).data('id');
                    window.pageManager.go(id);
                });
                $('.js_category').live('click', function() {
                    $(this).attr('aria-live', 'assertive');
                    expandMenu.call(this);
                });
                $('.js_category').on('keydown', function(event) {
                    if (event.keyCode === 13) {
                        expandMenu.call(this);
                    }
                });

                var date = new Date();
                var pcurl = "download/供应室PDA接口程序-" + date.getFullYear() + (date.getMonth() + 1) + date.getDate() + ".rar";
                $('.pcdown').attr('href', pcurl);
                var pdaurl = "download/cssd.zip";
                $('.pdadown').attr('href', pdaurl);
                $.get('template.html', {
                    t: Math.random()
                }, function(response) {
                    $('.page__bd').html(response)
                })

                /*
                    关于markdown语法解析函数
                */
                function markedFn(res) {
                    if (!res) {
                        return '';
                    } else {
                        var str = res.replace(/(\*\*|__)(.*?)(\*\*|__)/g, '') //全局匹配内粗体
                            .replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g, '') //全局匹配图片
                            .replace(/\[[\s\S]*?\]\([\s\S]*?\)/g, '') //全局匹配连接
                            .replace(/<\/?.+?\/?>/g, '') //全局匹配内html标签
                            .replace(/(\*)(.*?)(\*)/g, '') //全局匹配内联代码块
                            .replace(/`{1,2}[^`](.*?)`{1,2}/g, '') //全局匹配内联代码块
                            .replace(/```([\s\S]*?)```[\s]*/g, '') //全局匹配代码块
                            .replace(/\~\~(.*?)\~\~/g, '') //全局匹配删除线
                            .replace(/[\s]*[-\*\+]+(.*)/g, '') //全局匹配无序列表
                            .replace(/[\s]*[0-9]+\.(.*)/g, '') //全局匹配有序列表
                            .replace(/(#+)(.*)/g, '') //全局匹配标题
                            .replace(/(>+)(.*)/g, '') //全局匹配摘要
                            .replace(/\r\n/g, "") //全局匹配换行
                            .replace(/\n/g, "") //全局匹配换行
                            .replace(/\s/g, "") //全局匹配空字符;
                        return str.slice(0, 155);
                    }
                }


                function markdown(res) {
                    if (!res) {
                        return '';
                    } else {
                        var str = res.replace(/(\*\*|__)(.*?)(\*\*|__)/g, '') //全局匹配内粗体
                            .replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g, '') //全局匹配图片
                            .replace(/\[[\s\S]*?\]\([\s\S]*?\)/g, '') //全局匹配连接
                            .replace(/<\/?.+?\/?>/g, '') //全局匹配内html标签
                            .replace(/(\*)(.*?)(\*)/g, '') //全局匹配内联代码块
                            .replace(/`{1,2}[^`](.*?)`{1,2}/g, '') //全局匹配内联代码块
                            .replace(/```([\s\S]*?)```[\s]*/g, '') //全局匹配代码块
                            .replace(/\~\~(.*?)\~\~/g, '') //全局匹配删除线
                            .replace(/[\s]*[-\*\+]+(.*)/g, '') //全局匹配无序列表
                            .replace(/[\s]*[0-9]+\.(.*)/g, '') //全局匹配有序列表
                            .replace(/(#+)(.*)/g, '') //全局匹配标题
                            .replace(/(>+)(.*)/g, '') //全局匹配摘要
                            .replace(/\r\n/g, "") //全局匹配换行
                            .replace(/\n/g, "") //全局匹配换行
                            .replace(/\s/g, "") //全局匹配空字符;
                        return str.slice(0, 155);
                    }
                }
            });
        </script>

        <script type="text/template" id="footerTmpl">
            <div class="page__ft">
                <img src="images/icon_footer_link.png" />
            </div>
        </script>
        <script src="./zepto.min.js"></script>
        <script src="./example.js"></script>

        <script>
            var _hmt = _hmt || [];
            (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?ac8a8f100abd8747c147c57f13776003";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>
</body>

</html>